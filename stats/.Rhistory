ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
#geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few()+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model_data.pdf", width = 10, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
#geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few()+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model.pdf", width = 10, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few()+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model_data.pdf", width = 10, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_hline(yintercept = 0.5, lty=2)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few()+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 24)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model_data.pdf", width = 10, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
#geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model.pdf", width = 10, height = 8, scale = 1)
kids_model_comp_mean_ci <- readRDS("../saves/kids_model_comp_mean_ci.rds")
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "loess", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d(direction = -1)+
scale_fill_viridis_d(direction = -1)
ggsave("../graphs/kids_all_model.pdf", width = 10, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 10.5, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 10.6, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 10.55, height = 8, scale = 1)
exp(-100)
exp(-1)
0.1846/2
0.1846/4
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", span = 2, se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d(direction = -1)+
scale_fill_viridis_d(direction = -1)
?geom_smooth
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d(direction = -1)+
scale_fill_viridis_d(direction = -1)
ggsave("../graphs/kids_all_model.pdf", width = 10.55, height = 8, scale = 1)
kids_model_comp_mean_ci <- readRDS("../saves/kids_model_comp_mean_ci.rds")%>%
filter(model == "RSA")
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d(direction = -1)+
scale_fill_viridis_d(direction = -1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model_data.pdf", width = 10.55, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
#geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_RSA_model.pdf", width = 10.55, height = 8, scale = 1)
kids_model_comp_mean_ci <- readRDS("../saves/kids_model_comp_mean_ci.rds")
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_all_model.pdf", width = 10.6, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 10.65, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 10.7, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d()+
scale_fill_viridis_d()
ggsave("../graphs/kids_all_model.pdf", width = 10.8, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 11, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 11.5, height = 8, scale = 1)
ggsave("../graphs/kids_all_model.pdf", width = 11.1, height = 8, scale = 1)
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d(direction = -1)+
scale_fill_viridis_d()
ggplot(kids_model_comp_mean_ci)+
geom_ribbon(aes(x =age_bin, ymin = lci, ymax = uci, fill = model), alpha = .4) +
geom_line(aes(age_bin, mean, col = model), size = 1, alpha = .5, linetype = 2) +
geom_smooth(data = p_data, aes(x = age_bin, y = correct_inf), col = "black", size = 0.8, method = "glm", method.args = list(family = "binomial"), se = T,  alpha = .7)+
geom_hline(yintercept = 0.5, lty=2)+
labs(y="proportion more informative")+
scale_x_continuous(limits=c(0,2), name="age", breaks = c(0,0.5,1,1.5,2), labels = c(3.0,3.5,4.0,4.5,5)) +
ylim(-0.05,1.05)+
facet_grid(Speaker~Alignment)+
theme_few(base_size = 20)+
scale_color_viridis_d(direction = -1)+
scale_fill_viridis_d(direction = -1)
ggsave("../graphs/kids_all_model.pdf", width = 11.1, height = 8, scale = 1)
library(tidyverse)
library(knitr)
library(langcog)
library(ggthemes)
library(jsonlite)
library(readxl)
## importing data
files <- dir("~/Work/MCC/git-mcc/kids_info_data_2/")
raw_data <- data_frame()
for (f in files) {
jf <- paste("~/Work/MCC/git-mcc/kids_info_data_2/",f,sep="")
jd <- jsonlite::fromJSON(paste(readLines(jf), collapse=""))
date <- str_sub(jf,45,str_length(jf)-11)
id <- as_data_frame(jd$data$data) %>% mutate(test_date = date)
raw_data <- bind_rows(raw_data, id)
}
unique(raw_data$subid)
d_raw <-raw_data %>%
mutate(experiment = "mcc_kids_inf_2_2")
log <- read_excel("../../MCC-subject_log.xlsx", 1)
log <- read_excel("../../MCC-subject_log.xlsx", 1)
getwd()
getwd()
log <- read_excel("../../../MCC-subject_log.xlsx", 1)%>%
filter(Condition == "inf")%>%
select(subid,experimenter,keep_drop,sex,dob)
log <- read_excel("../../../MCC-subject_log.xlsx", 1)
log
log <- read_excel("../../../MCC-subject_log.xlsx", 1)%>%
filter(Condition == "inf2")%>%
select(subid,experimenter,keep_drop,sex,dob)
d <- left_join(d_raw,log, by = "subid")%>%
filter(keep_drop == "keep")%>%
mutate(dob = as.numeric(dob),
dob = as.Date(dob,origin = "1899-12-30"),
age_num = lubridate::time_length(difftime(test_date,dob), "years"),
check_age = ifelse(substr(age_num,1,1) == subage, T, F))
d <- left_join(d_raw,log, by = "subid")
d <- left_join(d_raw,log, by = "subid")%>%
filter(keep_drop == "keep")
raw_data
date <- str_sub(jf,47,str_length(jf)-11)
raw_data <- data_frame()
for (f in files) {
jf <- paste("~/Work/MCC/git-mcc/kids_info_data_2/",f,sep="")
jd <- jsonlite::fromJSON(paste(readLines(jf), collapse=""))
date <- str_sub(jf,47,str_length(jf)-11)
id <- as_data_frame(jd$data$data) %>% mutate(test_date = date)
raw_data <- bind_rows(raw_data, id)
}
raw_data
d_raw <-raw_data %>%
mutate(test_date = as.Date(test_date),
experiment = "mcc_kids_inf_2_2")
d_raw
log
log <- read_excel("../../../MCC-subject_log.xlsx", 1)%>%
filter(Condition == "inf2")%>%
select(subid,experimenter,keep_drop,sex,dob)
d <- left_join(d_raw,log, by = "subid")%>%
filter(keep_drop == "keep")%>%
mutate(dob = as.numeric(dob),
dob = as.Date(dob,origin = "1899-12-30"),
age_num = lubridate::time_length(difftime(test_date,dob), "years"),
check_age = ifelse(substr(age_num,1,1) == subage, T, F))
length(unique(d$subid))
length(unique(raw_data$subid))
d %>%
group_by(subage)%>%
summarise(n = length(unique(subid)))%>%
knitr::kable(digits = 2)
pf1 <- d %>%
filter(trial == "filler1" | trial == "filler2")%>%
group_by(control,subage, subid) %>%
summarise(correct = mean(correct))
pf2 <- pf1 %>%
multi_boot_standard(col = "correct")
ggplot() +
geom_jitter(data = pf1, aes(x = control, y = correct, col = subage, alpha = .2),width = .3,height = .025)+
geom_pointrange(data = pf2, aes(x = control, y = mean, col = subage, ymin = ci_lower, ymax = ci_upper),size = .8)+
geom_hline(yintercept = 0.5, lty=2)+
labs(x="",y="Proportion Expected Choice")+
theme_few() +
facet_wrap(~subage)+
ylim(-0.05,1.05)+
guides(alpha = F)+
theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())+
scale_colour_solarized(name="Control",
breaks=c("false", "true"),
labels=c("No", "Yes"))
p1 <- d %>%
filter(trial != "filler1",
trial != "filler2")%>%
group_by(control,subage, subid) %>%
summarise(correct = mean(correct))
p2 <- p1 %>%
multi_boot_standard(col = "correct")
ggplot() +
geom_jitter(data = p1, aes(x = control, y = correct, col = subage, alpha = .2),width = .3,height = .025)+
geom_pointrange(data = p2, aes(x = control, y = mean, col = subage, ymin = ci_lower, ymax = ci_upper),size = .8)+
geom_hline(yintercept = 0.5, lty=2)+
labs(x="",y="Proportion Expected Choice")+
theme_few() +
facet_wrap(~subage)+
ylim(-0.05,1.05)+
guides(alpha = F)+
theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())+
scale_colour_solarized(name="Control",
breaks=c("false", "true"),
labels=c("No", "Yes"))
p5 <- d %>%
filter(trial != "filler1",
trial != "filler2") %>%
group_by(age_num, subid) %>%
summarise(correct = mean(correct))
ggplot(data = p5, aes(x = age_num, y = correct)) +
geom_smooth(method = "lm", se = T)+
geom_jitter( alpha = .5, height = 0.04)+
geom_hline(yintercept = 0.5, lty=2)+
labs(x="",y="Proportion Expected Choice")+
theme_few() +
ylim(-0.05,1.05)+
guides(alpha = F)+
#theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())+
scale_colour_solarized(name="Speaker Change",
breaks=c("false", "true"),
labels=c("No", "Yes"))
pf1
pf1 <- d %>%
filter(trial == "filler1" | trial == "filler2")%>%
group_by(control,subage, subid) %>%
summarise(correct = mean(correct),
n())
pf1
p1
d
d %>%
filter(subid== "190118_2_inf2")
unique(raw_data$subid)
log
files <- dir("~/Work/MCC/git-mcc/kids_info_data_2/")
raw_data <- data_frame()
for (f in files) {
jf <- paste("~/Work/MCC/git-mcc/kids_info_data_2/",f,sep="")
jd <- jsonlite::fromJSON(paste(readLines(jf), collapse=""))
date <- str_sub(jf,47,str_length(jf)-11)
id <- as_data_frame(jd$data$data) %>% mutate(test_date = date)
raw_data <- bind_rows(raw_data, id)
}
length(unique(raw_data$subid))
raw_data <- data_frame()
for (f in files) {
jf <- paste("~/Work/MCC/git-mcc/kids_info_data_2/",f,sep="")
jd <- jsonlite::fromJSON(paste(readLines(jf), collapse=""))
date <- str_sub(jf,47,str_length(jf)-11)
id <- as_data_frame(jd$data$data) %>% mutate(test_date = date)
raw_data <- bind_rows(raw_data, id)
}
length(unique(raw_data$subid))
raw_data <- data_frame()
for (f in files) {
jf <- paste("~/Work/MCC/git-mcc/kids_info_data_2/",f,sep="")
jd <- jsonlite::fromJSON(paste(readLines(jf), collapse=""))
date <- str_sub(jf,47,str_length(jf)-11)
id <- as_data_frame(jd$data$data) %>% mutate(test_date = date)
raw_data <- bind_rows(raw_data, id)
}
length(unique(raw_data$subid))
d_raw <-raw_data %>%
mutate(test_date = as.Date(test_date),
experiment = "mcc_kids_inf_2_2")
log <- read_excel("../../../MCC-subject_log.xlsx", 1)%>%
filter(Condition == "inf2")%>%
select(subid,experimenter,keep_drop,sex,dob)
d <- left_join(d_raw,log, by = "subid")%>%
filter(keep_drop == "keep")%>%
mutate(dob = as.numeric(dob),
dob = as.Date(dob,origin = "1899-12-30"),
age_num = lubridate::time_length(difftime(test_date,dob), "years"),
check_age = ifelse(substr(age_num,1,1) == subage, T, F))
length(unique(d$subid))
d %>%
group_by(subage)%>%
summarise(n = length(unique(subid)))%>%
knitr::kable(digits = 2)
d %>%
filter(subid== "190118_2_inf2")
d %>%
group_by(subage)%>%
summarise(n = length(unique(subid)))%>%
knitr::kable(digits = 2)
pf1 <- d %>%
filter(trial == "filler1" | trial == "filler2")%>%
group_by(control,subage, subid) %>%
summarise(correct = mean(correct),
n())
pf2 <- pf1 %>%
multi_boot_standard(col = "correct")
ggplot() +
geom_jitter(data = pf1, aes(x = control, y = correct, col = subage, alpha = .2),width = .3,height = .025)+
geom_pointrange(data = pf2, aes(x = control, y = mean, col = subage, ymin = ci_lower, ymax = ci_upper),size = .8)+
geom_hline(yintercept = 0.5, lty=2)+
labs(x="",y="Proportion Expected Choice")+
theme_few() +
facet_wrap(~subage)+
ylim(-0.05,1.05)+
guides(alpha = F)+
theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())+
scale_colour_solarized(name="Control",
breaks=c("false", "true"),
labels=c("No", "Yes"))
p1 <- d %>%
filter(trial != "filler1",
trial != "filler2")%>%
group_by(control,subage, subid) %>%
summarise(correct = mean(correct))
p2 <- p1 %>%
multi_boot_standard(col = "correct")
ggplot() +
geom_jitter(data = p1, aes(x = control, y = correct, col = subage, alpha = .2),width = .3,height = .025)+
geom_pointrange(data = p2, aes(x = control, y = mean, col = subage, ymin = ci_lower, ymax = ci_upper),size = .8)+
geom_hline(yintercept = 0.5, lty=2)+
labs(x="",y="Proportion Expected Choice")+
theme_few() +
facet_wrap(~subage)+
ylim(-0.05,1.05)+
guides(alpha = F)+
theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())+
scale_colour_solarized(name="Control",
breaks=c("false", "true"),
labels=c("No", "Yes"))
p5 <- d %>%
filter(trial != "filler1",
trial != "filler2") %>%
group_by(age_num, subid) %>%
summarise(correct = mean(correct))
ggplot(data = p5, aes(x = age_num, y = correct)) +
geom_smooth(method = "lm", se = T)+
geom_jitter( alpha = .5, height = 0.04)+
geom_hline(yintercept = 0.5, lty=2)+
labs(x="",y="Proportion Expected Choice")+
theme_few() +
ylim(-0.05,1.05)+
guides(alpha = F)+
#theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())+
scale_colour_solarized(name="Speaker Change",
breaks=c("false", "true"),
labels=c("No", "Yes"))
p1
pf1
pf1 <- d %>%
filter(trial == "filler1" | trial == "filler2")%>%
group_by(control,subage, subid) %>%
summarise(correct = mean(correct))
pf1
